
<div class="container mt-5">
    <p-table 
      #productTable
      styleClass="p-datatable-gridlines p-datatable-striped"
      [value]="$productSales()"
      dataKey="productID"
      [globalFilterFields]="['productName','productID','salesQ1','salesQ2', 'salesQ3', 'salesQ4']">

      <ng-template pTemplate="caption">
        <div class="p-d-flex">
          <span class="p-input-icon-left p-ml-auto">
              <i class="pi pi-search"></i>
              <input 
                type="text"
                class="form-control" 
                placeholder="Search..."
                (input)="search(productTable, $event)">
            </span>
        </div>
      </ng-template>


      <ng-template pTemplate="header">
        <tr>
          <th 
            rowspan="2"
            pSortableColumn="productID">
              {{header('productID')}}
              <p-sortIcon field="code"></p-sortIcon>
          </th>
          <th 
            rowspan="2"
            pSortableColumn="productName">
            {{header('productName')}}
              <p-sortIcon field="code"></p-sortIcon>
          </th>
          <th colspan="4">
            {{header('sales')}}
          </th>
          <th 
            rowspan="2"
            pSortableColumn="totalSales">
            {{header('totalSales')}}
              <p-sortIcon field="code"></p-sortIcon>
          </th>
        </tr>
        <tr>
          <th pSortableColumn="salesQ1">
            {{subheader('salesQ1')}}
            <p-sortIcon field="code"></p-sortIcon>
          </th>
          <th pSortableColumn="salesQ2">
            {{subheader('salesQ2')}}
            <p-sortIcon field="code"></p-sortIcon>
          </th>
          <th pSortableColumn="salesQ3">
            {{subheader('salesQ3')}}
            <p-sortIcon field="code"></p-sortIcon>
          </th>
          <th pSortableColumn="salesQ4">
            {{subheader('salesQ4')}}
            <p-sortIcon field="code"></p-sortIcon>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
          <tr>
              <td pEditableColumn>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                      <input 
                        pInputText type="text" 
                        [(ngModel)]="product.productID">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{product.productID}}
                  </ng-template>
                </p-cellEditor>

              </td>
              <td pEditableColumn>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                      <input 
                        pInputText 
                        type="text" 
                        [(ngModel)]="product.productName">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{product.productName}}
                  </ng-template>
                </p-cellEditor>

              </td>
              <td pEditableColumn>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                      <input 
                        pInputText 
                        type="number" 
                        [(ngModel)]="product.salesQ1">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{product.salesQ1}} €
                  </ng-template>
                </p-cellEditor>
              </td>
              <td pEditableColumn>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                      <input 
                        pInputText 
                        type="number" 
                        [(ngModel)]="product.salesQ2">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{product.salesQ2}} €
                  </ng-template>
                </p-cellEditor>
              </td>
              <td pEditableColumn>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                      <input 
                        pInputText 
                        type="number" 
                        [(ngModel)]="product.salesQ3">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{product.salesQ3}} €
                  </ng-template>
                </p-cellEditor>
              </td>
              <td pEditableColumn>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                      <input 
                        pInputText 
                        type="number" 
                        [(ngModel)]="product.salesQ4">
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{product.salesQ4}} €
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>{{product.salesQ1 + product.salesQ2 + product.salesQ3 + product.salesQ4}} €</td>
          </tr>
      </ng-template>
  </p-table> 
</div>



